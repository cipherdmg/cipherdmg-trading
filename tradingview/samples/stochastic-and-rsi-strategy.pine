//@version=5
// ||###################################################################################||
// ||                                                                                   ||
// ||
// ||  Stochastic Slow + Relative Strength Index, Double Strategy
// ||
// ||  This strategy combines the classic RSI strategy to sell when the RSI increases
// ||  over 70 (or to buy when it falls below 30), with the classic Stochastic Slow strategy
// ||  to sell when the Stochastic oscillator exceeds the value of 80 (and to buy when
// ||  this value is below 20).
// ||
// ||  This simple strategy only triggers when both the RSI and the Stochastic are together
// ||  in overbought or oversold conditions.
// ||                                                                                   ||
// ||###################################################################################||
strategy('Stochastic and RSI Strategy', shorttitle='Stochastic and RSI Strategy', overlay=true)


///////////// Stochastic Slow
Stochlength = input.int(14, minval=1, title='lookback length of Stochastic')
StochOverBought = input(80, title='Stochastic overbought condition')
StochOverSold = input(20, title='Stochastic oversold condition')
smoothK = input(3, title='smoothing of Stochastic %K ')
smoothD = input(3, title='moving average of Stochastic %K')
k = ta.sma(ta.stoch(close, high, low, Stochlength), smoothK)
d = ta.sma(k, smoothD)


///////////// RSI
RSIlength = input.int(14, minval=1, title='lookback length of RSI')
RSIOverBought = input(70, title='RSI overbought condition')
RSIOverSold = input(30, title='RSI oversold condition')
RSIprice = close
vrsi = ta.rsi(RSIprice, RSIlength)


///////////// Double strategy: RSI strategy + Stochastic strategy

if not na(k) and not na(d)
    if ta.crossover(k, d) and k < StochOverSold
        if not na(vrsi) and ta.crossover(vrsi, RSIOverSold)
            strategy.entry('LONG', strategy.long, comment='StochLE + RsiLE')


if ta.crossunder(k, d) and k > StochOverBought
    if ta.crossunder(vrsi, RSIOverBought)
        strategy.entry('SHORT', strategy.short, comment='StochSE + RsiSE')


//plot(strategy.equity, title="equity", color=red, linewidth=2, style=areabr)

